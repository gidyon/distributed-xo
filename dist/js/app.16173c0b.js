(function(e){function a(a){for(var n,o,s=a[0],l=a[1],c=a[2],d=0,u=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&u.push(r[o][0]),r[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);m&&m(a);while(u.length)u.shift()();return i.push.apply(i,c||[]),t()}function t(){for(var e,a=0;a<i.length;a++){for(var t=i[a],n=!0,o=1;o<t.length;o++){var s=t[o];0!==r[s]&&(n=!1)}n&&(i.splice(a--,1),e=l(l.s=t[0]))}return e}var n={},o={app:0},r={app:0},i=[];function s(e){return l.p+"js/"+({game:"game"}[e]||e)+"."+{game:"be0133c2"}[e]+".js"}function l(a){if(n[a])return n[a].exports;var t=n[a]={i:a,l:!1,exports:{}};return e[a].call(t.exports,t,t.exports,l),t.l=!0,t.exports}l.e=function(e){var a=[],t={game:1};o[e]?a.push(o[e]):0!==o[e]&&t[e]&&a.push(o[e]=new Promise(function(a,t){for(var n="css/"+({game:"game"}[e]||e)+"."+{game:"b88ccf19"}[e]+".css",r=l.p+n,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var c=i[s],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===n||d===r))return a()}var u=document.getElementsByTagName("style");for(s=0;s<u.length;s++){c=u[s],d=c.getAttribute("data-href");if(d===n||d===r)return a()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=a,m.onerror=function(a){var n=a&&a.target&&a.target.src||r,i=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=n,delete o[e],m.parentNode.removeChild(m),t(i)},m.href=r;var g=document.getElementsByTagName("head")[0];g.appendChild(m)}).then(function(){o[e]=0}));var n=r[e];if(0!==n)if(n)a.push(n[2]);else{var i=new Promise(function(a,t){n=r[e]=[a,t]});a.push(n[2]=i);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,l.nc&&d.setAttribute("nonce",l.nc),d.src=s(e);var u=new Error;c=function(a){d.onerror=d.onload=null,clearTimeout(m);var t=r[e];if(0!==t){if(t){var n=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.src;u.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",u.name="ChunkLoadError",u.type=n,u.request=o,t[1](u)}r[e]=void 0}};var m=setTimeout(function(){c({type:"timeout",target:d})},12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(a)},l.m=e,l.c=n,l.d=function(e,a,t){l.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,a){if(1&a&&(e=l(e)),8&a)return e;if(4&a&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(l.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var n in e)l.d(t,n,function(a){return e[a]}.bind(null,n));return t},l.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(a,"a",a),a},l.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},l.p="/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=a,c=c.slice();for(var u=0;u<c.length;u++)a(c[u]);var m=d;i.push([0,"chunk-vendors"]),t()})({0:function(e,a,t){e.exports=t("56d7")},"13e3":function(e,a,t){},"3f7a":function(e,a,t){"use strict";var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.showDialog,expression:"showDialog"}],attrs:{id:"dialog"}},[t("div",{staticClass:"dialog-container"},[t("div",{staticClass:"dialog-header"},[e._v(e._s(e.dialog.dialogHeader))]),t("div",{staticClass:"dialog-actions"},[e.dialog.dialogCancel?t("div",{on:{click:function(a){return e.dialogClicked(!1)}}},[t("button",{staticClass:"dialog-cancel-btn"},[e._v(e._s(e.dialog.dialogCancelText))])]):e._e(),e.dialog.dialogOK?t("div",{on:{click:function(a){return e.dialogClicked(!0)}}},[t("button",{staticClass:"dialog-ok-btn"},[e._v(e._s(e.dialog.dialogOKText))])]):e._e()])])])},o=[],r=t("2f62"),i=t("c7da"),s={props:{showDialog:{type:Boolean,default:!1}},computed:{...Object(r["c"])(["dialog"])},methods:{...Object(r["b"])(["DialogClicked"]),dialogClicked(e){if(e){let e=this.shouldGoHome(this.dialog.dialogType),a=this.$router.history.current.fullPath;e?"/"!=a&&this.$router.push({path:"/"}):"/game"!=a&&this.$router.push({path:"/game"})}else this.dialog.dialogType==i["p"]&&this.$router.push({path:"/"});this.DialogClicked(e)},shouldGoHome(e){let a=!0;switch(e){case i["n"]:break;case i["i"]:break;case i["g"]:break;case i["h"]:break;default:a=!1;break}return a}}},l=s,c=(t("ca61"),t("2877")),d=Object(c["a"])(l,n,o,!1,null,"24dc4752",null);a["a"]=d.exports},"56d7":function(e,a,t){"use strict";t.r(a);var n=t("2b0e"),o=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{attrs:{id:"app"}},[e._m(0),t("div",{attrs:{id:"log-area"}},[e._v(e._s(e.errors))]),t("Dialog",{attrs:{showDialog:e.dialog.active},on:{clicked:e.dialogClicked}}),t("router-view")],1)},r=[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{attrs:{id:"header"}},[t("h2",[e._v("Tic Tac Toe")])])}],i=t("c7da"),s=t("2f62"),l=t("3f7a"),c={components:{Dialog:l["a"]},created(){const e=this.newConnection();this.$store.commit("SOCKET",e)},destroyed(){this.$store.dispatch("ExitGame")},computed:{...Object(s["c"])(["errors","dialog"])},methods:{...Object(s["d"])(["HIDE_DIALOG"]),async dialogClicked(e){this.showDialog=!1},newConnection(){let e;const a=this.$store,t=this.handleMessage;return window["WebSocket"]?(e=new WebSocket("ws://"+document.location.host+"/ws"),e.onclose=function(e){a.commit("LOG_ERROR","Connection closed.")},e.onopen=function(e){console.log("connected")},e.onerror=function(e){a.commit("LOG_ERROR",`Error: ${e}`)},e.onmessage=function(e){t(e,a)}):a.commit("LOG_ERROR","Your browser does not support WebSockets"),e},handleMessage(e,a){const t=JSON.parse(e.data);switch(t.Type){case i["e"]:a.commit("ADD_ME",t.Payload);break;case i["a"]:a.commit("ADD_PLAYERS",t.Payload);break;case i["j"]:a.commit("ADD_PLAYER",t.Payload);break;case i["k"]:a.commit("REMOVE_PLAYER",t.Payload);break;case i["o"]:a.dispatch("OnGameRequest",t.Payload);break;case i["g"]:a.dispatch("OnBusy",t.Payload);break;case i["n"]:a.dispatch("OnRejected",t.Payload);break;case i["q"]:a.dispatch("OnStartGame",t.Payload);break;case i["m"]:a.dispatch("OnNotPlaying",t.Payload);break;case i["p"]:a.dispatch("OnRestartGame",t.Payload);break;case i["i"]:console.log("other player exiting"),a.dispatch("OnExitGame",t.Payload);break;case i["l"]:a.dispatch("OnMove",t.Payload);break;case i["d"]:a.dispatch("OnWon",t.Payload);break;case i["c"]:a.dispatch("OnDraw",t.Payload);break;case i["b"]:a.commit("LOG_ERROR",t.Payload);break;default:break}}}},d=c,u=(t("5c0b"),t("2877")),m=Object(u["a"])(d,o,r,!1,null,null,null),g=m.exports,p={async RequestGame({commit:e,getters:a},t){e("ADD_OPPONENT",t),e("APP_LOADING",!0);try{const t=E(i["o"],a.opponent.id);a.socket.send(t)}catch(n){e("RESET_OPPONENT"),e("EXIT_GAME")}finally{e("APP_LOADING",!1)}},async OnBusy({commit:e,getters:a}){e("UPDATE_DIALOG",{active:!0,dialogHeader:`${a.opponent.name} is busy!`,dialogType:i["g"],dialogCancelText:"REJECT",dialogOKText:"FIND OTHER PLAYERS",dialogOK:!0,dialogCancel:!1})},async OnGameRequest({commit:e},a){const t=y(a);e("ADD_OPPONENT",t),e("UPDATE_DIALOG",{active:!0,dialogHeader:`${t.name} is requesting to play`,dialogType:i["o"],dialogCancelText:"REJECT",dialogOKText:"ACCEPT",dialogOK:!0,dialogCancel:!0})},async DialogClicked({commit:e,getters:a,dispatch:t},n){e("APP_LOADING",!0);try{switch(a.dialog.dialogType){case i["g"]:e("RESET_OPPONENT"),e("EXIT_GAME");break;case i["o"]:n?await t("AcceptGame"):await t("RejectGame");break;case i["n"]:e("RESET_OPPONENT"),e("EXIT_GAME");break;case i["i"]:n&&(await t("ExitGame"),e("RESET_OPPONENT"),e("EXIT_GAME"));break;case i["h"]:e("RESET_OPPONENT"),e("EXIT_GAME");break;case i["p"]:n?await t("RestartGame"):(await t("ExitGame"),e("RESET_OPPONENT"),e("EXIT_GAME"));break;default:break}}finally{e("APP_LOADING",!1),e("RESET_DIALOG")}},async AcceptGame({commit:e,getters:a}){try{const t=E(i["f"],a.opponent.id);a.socket.send(t),e("START_GAME")}finally{}},async OnStartGame({commit:e}){e("START_GAME")},async RejectGame({commit:e,getters:a}){try{const t=E(i["n"],a.opponent.id);a.socket.send(t),e("RESET_OPPONENT"),e("EXIT_GAME")}finally{}},async OnRejected({commit:e,getters:a}){e("UPDATE_DIALOG",{active:!0,dialogHeader:`${a.opponent.name} has rejected your game offer`,dialogCancelText:"REJECT",dialogType:i["n"],dialogOKText:"Exit Dialog",dialogOK:!0,dialogCancel:!1})},async RestartGame({getters:e}){try{const a=E(i["p"],e.opponent.id);e.socket.send(a)}finally{}},async OnRestartGame({commit:e},a){e("UPDATE_DIALOG",{active:!0,dialogHeader:`${getters.opponent.name} is requesting for rematch`,dialogType:i["p"],dialogCancelText:"REJECT",dialogOKText:"ACCEPT",dialogOK:!0,dialogCancel:!0})},async ExitGame({getters:e}){try{const a=E(i["i"],e.opponent.id);e.socket.send(a)}finally{}},async OnExitGame({commit:e,getters:a}){e("UPDATE_DIALOG",{active:!0,dialogHeader:`Oops! ${a.opponent.name} has exited the game!`,dialogType:i["h"],dialogCancelText:"REJECT",dialogOKText:"OK. GO TO MENU",dialogOK:!0,dialogCancel:!1})},async PlayerMove({commit:e,getters:a,dispatch:t},n){if(a.isMyTurn)if(a.elementClicked(n.moveID))console.log("element already clicked");else{try{const e=E(i["l"],n.moveID);a.socket.send(e)}finally{}e("UPDATE_GAME",{moveID:n.moveID,val:"X"}),e("PLAYTURN_OPPONENT"),t("IsGameOver")}else console.log("not your turn")},IsGameOver({commit:e,getters:a}){let t;try{a.gameDraw?(t=E(i["c"],a.player.id),a.socket.send(t),e("UPDATE_DIALOG",{active:!0,dialogHeader:"Game Draw! Restart?",dialogType:i["p"],dialogCancelText:"NO",dialogOKText:"YES",dialogOK:!0,dialogCancel:!0}),e("EXIT_GAME")):a.gameOver&&(t=E(i["d"],a.player.id),a.socket.send(t),e("UPDATE_DIALOG",{active:!0,dialogHeader:"You have won. Restart Game?",dialogType:i["p"],dialogCancelText:"NO",dialogOKText:"YES",dialogOK:!0,dialogCancel:!0}),e("EXIT_GAME"))}finally{}},async OnMove({commit:e},a){let t="O";e("UPDATE_GAME",{moveID:a,val:t}),e("PLAYTURN_MINE")},async OnWon({commit:e,getters:a}){e("UPDATE_DIALOG",{active:!0,dialogHeader:`${a.opponent.name} has won. Restart Game?`,dialogType:i["p"],dialogCancelText:"NO",dialogOKText:"YES",dialogOK:!0,dialogCancel:!0})},async OnDraw({commit:e}){e("UPDATE_DIALOG",{active:!0,dialogHeader:"Game is draw. Restart Game?",dialogType:i["p"],dialogCancelText:"NO",dialogOKText:"YES",dialogOK:!0,dialogCancel:!0})}};const E=(e,a)=>{return JSON.stringify({Type:e,Payload:a})},y=e=>{return{id:e.ID,name:e.Name,state:e.State,won:e.Won,draw:e.Draw,lost:e.Lost,isInitiator:e.Initiator}},T=e=>{return{id:e.ID,name:e.Name,state:e.State,won:e.Won,draw:e.Draw,lost:e.Lost,isInitiator:e.Initiator}};var O={["APP_LOADING"](e,a){e.loading=a},["SOCKET"](e,a){e.socket=a},["LOG_ERROR"](e,a){e.errors=a},["ADD_ME"](e,a){const t=T(a);e.player=t},["ADD_PLAYERS"](e,a){const t=Object.values(a);t.forEach(a=>{a.ID!==e.player.id&&e.players.push(T(a))})},["ADD_PLAYER"](e,a){a.ID!==e.player.id&&e.players.push(T(a))},["REMOVE_PLAYER"](e,a){e.players=e.players.filter(e=>e.id!=a)},["ADD_OPPONENT"](e,a){e.opponent=a},["RESET_OPPONENT"](e){e.opponent={}},["START_GAME"](e){e.gaming=!0,e.game.playGroundElements.forEach(e=>{document.getElementById(e.id).innerHTML=""}),e.game.isMyTurn=!0,e.game.playTurn="Your turn to play",e.game.moves=0,e.game.gameOver=!1,e.game.playGroundElements=[]},["EXIT_GAME"](e){e.gaming=!1,e.game.playGroundElements.forEach(e=>{document.getElementById(e.id).innerHTML=""}),e.game.isMyTurn=!0,e.game.playTurn="Your turn to play",e.game.moves=0,e.game.gameOver=!1,e.game.playGroundElements=[]},["PLAYTURN_WAITING"](e){e.gaming=!1,e.game.playTurn="Waiting for opponent ..."},["UPDATE_DIALOG"](e,a){e.dialog=a},["RESET_DIALOG"](e,a){e.dialog={}},["UPDATE_PLAYGROUND"](e){console.log("updating playground elements"),console.log(e.game.playGroundElements),e.game.playGroundElements.forEach(e=>{document.getElementById(e.id).innerHTML=e.val})},["UPDATE_GAME"](e,{moveID:a,val:t}){document.getElementById(a).innerHTML=t;const n={clicked:!0,val:t,id:a,possibleWins:[]};if(e.game.winPossibilities.forEach(e=>{e.forEach(a=>{n.id==`id-${a}`&&n.possibleWins.push(e)})}),e.game.playGroundElements.push(n),e.game.moves++,e.game.moves<=1)return void console.log("moves <= 1");let o=!1;n.possibleWins.forEach(a=>{if(o)return;let t=0;a.forEach(a=>{const o=e.game.playGroundElements.find(e=>e.id==`id-${a}`);o&&o.clicked&&o.val==n.val&&t++}),3===t&&(console.log("game over"),o=!0)}),e.game.gameOver=o},["PLAYTURN_MINE"](e){e.game.isMyTurn=!0,e.game.playTurn="Your turn to play"},["PLAYTURN_OPPONENT"](e){e.game.isMyTurn=!1,e.game.playTurn=`${e.opponent.name} turn to play`},["PLAYTURN_CLICKED"](e){e.game.playTurn="Element clicked."}},f={loading:e=>{return e.loading},player:e=>{return e.player},opponent:e=>{return e.opponent},players:e=>{return e.players},playersNum:e=>{return e.players.length},socket:e=>{return e.socket},errors:e=>{return e.errors},gaming:e=>{return e.gaming},gameDraw:e=>{return e.game.moves>=9},gameOver:e=>{return e.game.gameOver},playGroundElements:e=>a=>{return e.game.playGroundElements},playGroundElementByVal:e=>a=>{return e.game.playGroundElements.find(e=>e.val==a)},elementClicked:e=>a=>{return e.game.playGroundElements.find(e=>e.id===a&&!0===e.clicked)},isMyTurn:e=>{return e.game.isMyTurn},moveValid:e=>a=>{return!e.elementClicked(a)&&e.isMyTurn},playTurn:e=>{return e.game.playTurn},game:e=>{return e.game},dialog:e=>{return e.dialog},error:e=>{return e.errors},noError:e=>{return void 0==e.error||null==e.error||""==e.error}};n["a"].use(s["a"]);var h=new s["a"].Store({strict:!0,state:{loading:!1,gaming:!1,game:{isMyTurn:!0,playTurn:"Your turn to play",moves:0,gameOver:!1,playGroundElements:[],winPossibilities:[[11,12,13],[11,21,31],[11,22,33],[21,22,23],[13,22,31],[12,22,32],[31,32,33],[13,23,33]]},player:{id:"Maximilian Tin",name:"Maximilian Tin",state:"Free",won:0,draw:0,lost:0,isInitiator:!1},opponent:{id:"Vancsouri Tin",name:"Travis Owain",state:"Free",won:0,draw:0,lost:0,isInitiator:!1},players:[],socket:null,errors:null,dialog:{active:!1,dialogHeader:"",dialogCancelText:"",dialogOKText:"",dialogOK:!1,dialogCancel:!1}},actions:p,mutations:O,getters:f}),v=t("8c4f"),_=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{attrs:{id:"players-area"}},[t("div",{staticClass:"name-area"},[e._v("\n        Your generated name: "),t("span",{attrs:{id:"your-name"}},[e._v(e._s(e.player.name))])]),e.gaming?t("div",{staticClass:"name-area",staticStyle:{"margin-top":"10px"}},[t("span",{staticClass:"pcoh",on:{click:function(a){return e.goto("/game")}}},[e._v("Resume Game >>")])]):e._e(),t("div",{staticClass:"players-num"},[t("span",{attrs:{id:"num"}},[e._v(e._s(e.playersNum))]),e._v(" Online players\n    ")]),t("div",{staticClass:"players-list",attrs:{id:"players-list"}},e._l(e.players,function(a,n){return t("div",{key:n,staticClass:"player-container"},[t("div",{staticClass:"name p-name"},[e._v(e._s(a.name))]),t("div",{staticClass:"score"},[t("div",[e._v("Won: "+e._s(a.won))]),t("div",[e._v("Draw: "+e._s(a.draw))]),t("div",[e._v("Lost: "+e._s(a.lost))])]),t("div",{staticClass:"button"},[t("button",{on:{click:function(t){return t.stopPropagation(),e.requestGame(a)}}},[e._v("Play")])])])}),0)])},A=[],P={computed:{...Object(s["c"])(["players","gaming","playersNum","player","noError"])},methods:{...Object(s["b"])(["RequestGame"]),async requestGame(e){this.$router.push({path:"/game"}),await this.RequestGame(e),this.noError||this.$router.push({path:"/game"})},goto(e){this.$router.push({path:e})}}},G=P,b=Object(u["a"])(G,_,A,!1,null,null,null),D=b.exports;n["a"].use(v["a"]);var R=new v["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:D},{path:"/game",name:"game",component:()=>t.e("game").then(t.bind(null,"25e0"))}]});t("a1a3");n["a"].config.productionTip=!1,new n["a"]({store:h,router:R,render:e=>e(g)}).$mount("#app")},"5c0b":function(e,a,t){"use strict";var n=t("13e3"),o=t.n(n);o.a},a1a3:function(e,a,t){},c7da:function(e,a,t){"use strict";t.d(a,"e",function(){return n}),t.d(a,"a",function(){return o}),t.d(a,"j",function(){return r}),t.d(a,"k",function(){return i}),t.d(a,"o",function(){return s}),t.d(a,"n",function(){return l}),t.d(a,"f",function(){return c}),t.d(a,"q",function(){return d}),t.d(a,"m",function(){return u}),t.d(a,"p",function(){return m}),t.d(a,"i",function(){return g}),t.d(a,"h",function(){return p}),t.d(a,"g",function(){return E}),t.d(a,"l",function(){return y}),t.d(a,"d",function(){return T}),t.d(a,"c",function(){return O}),t.d(a,"b",function(){return f});const n="WELCOME",o="PLAYERS",r="JOIN",i="LEFT",s="REQUESTGAME",l="REJECTGAME",c="ACCEPTGAME",d="STARTGAME",u="STATENOTPLAYING",m="RESTARTGAME",g="PLAYEREXIT",p="PLAYEREXITED",E="PLAYERBUSY",y="PLAYERMOVE",T="WON",O="DRAW",f="ERROR"},ca61:function(e,a,t){"use strict";var n=t("db73"),o=t.n(n);o.a},db73:function(e,a,t){}});
//# sourceMappingURL=app.16173c0b.js.map